# 2026-02-02：CLI 模式实施进展

## 已完成

- 新增并完成独立 CLI 工程（对外入口）：`src/Windows.Agent.Cli/Windows.Agent.Cli.csproj`（内部调用现存 `Windows.Agent.Tools.*`）。
- Phase 3 已执行：移除 MCP Server 与 `Windows.Agent` 内嵌 Legacy CLI：
  - 删除 `src/Windows.Agent/Program.cs`
  - 删除 `src/Windows.Agent/Cli/`
  - 移除 `ModelContextProtocol` 依赖与 MCP attributes

## 已验证（可复现命令）

- `dotnet build -c Release`
- `dotnet run --project src/Windows.Agent.Cli/Windows.Agent.Cli.csproj -- help`

## 已知问题/风险

- 仍存在项目既有 warning（OCR 可空性、Windows-only API 分析告警等），本次未处理。
- CLI 的 `desktop` 命令直接调用底层 DesktopService，仍可能产生真实桌面副作用；建议在 AI 调用侧加“确认/沙箱/白名单”策略（待后续任务定义）。

## 下一步（待确认）

- 是否需要为 CLI 增加“高危命令开关/确认机制”（例如 `--i-know-what-i-am-doing`）以减少误触？
- 是否要把 CLI 输出 schema 固化为稳定格式（`success/status/data/error`）并写入 `docs/reference/`？
